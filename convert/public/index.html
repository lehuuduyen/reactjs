<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

  <link href="%PUBLIC_URL%/App.css" rel="stylesheet" type="text/css">
  <link href="%PUBLIC_URL%/style.css" rel="stylesheet" type="text/css">
  <link href="%PUBLIC_URL%/test.css" rel="stylesheet" type="text/css">
  <link href="%PUBLIC_URL%/toastr.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="%PUBLIC_URL%/js/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
  <script src="%PUBLIC_URL%/js/toastr.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://kit.fontawesome.com/a60e3c87cb.js" crossorigin="anonymous"></script>
  <script>
    function BtnLoading(elem) {
      $(elem).attr("data-original-text", $(elem).html());
      $(elem).prop("disabled", true);
      $(elem).html('<i class="spinner-border spinner-border-sm"></i> Loading...');
    }

    function BtnReset(elem) {
      $(elem).prop("disabled", false);
      $(elem).html($(elem).attr("data-original-text"));
    }

    function closePopupSupplier() {
      $(".k-overlay,.click-modal").css('display', 'none')
      const inputs = document.querySelectorAll('.formInsert');
      inputs.forEach(input => {
        input.value = '';
      });
      $("#output").attr('src', "https://cdn-app.kiotviet.vn/retailler/Content/img/default-product-img.jpg")

    }
    $(document).on("click", ".k-overlay,.k-i-close", function () {
      closePopupSupplier()
    })

    function formatCurrency(price, symbol = "$") {

      return symbol + price.toString().replaceAll(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    function formatCurrencyKeyup(input, blur) {
      // appends $ to value, validates decimal side
      // and puts cursor back in right position.

      // get input value
      var input_val = input.val();
      // don't validate empty input
      if (input_val === "") {
        return;
      }

      // original length
      var original_len = input_val.length;

      // initial caret position 
      var caret_pos = input.prop("selectionStart");

      // check for decimal
      if (input_val.indexOf(".") >= 0) {

        // get position of first decimal
        // this prevents multiple decimals from
        // being entered
        var decimal_pos = input_val.indexOf(".");

        // split number by decimal point
        var left_side = input_val.substring(0, decimal_pos);
        var right_side = input_val.substring(decimal_pos);

        // add commas to left side of number
        left_side = formatNumber(left_side);

        // validate right side
        right_side = formatNumber(right_side);

        // On blur make sure 2 numbers after decimal


        // Limit decimal to only 2 digits
        right_side = right_side.substring(0, 2);

        // join number by .
        input_val = "$" + left_side + "." + right_side;

      } else {
        // no decimal entered
        // add commas to number
        // remove all non-digits
        input_val = formatNumber(input_val);
        input_val = "$" + input_val;

        // final formatting
        if (blur === "blur") {
          input_val += ".00";
        }
      }

      // send updated string to input
      input.val(input_val);

      // put caret back in the right position
      var updated_len = input_val.length;
      caret_pos = updated_len - original_len + caret_pos;
      input[0].setSelectionRange(caret_pos, caret_pos);
    }
    $(document).on('keyup', "input[data-type='currency']", function () {
      //stuff happens
      formatCurrencyKeyup($(this));

    });



    function formatNumber(n) {
      // format number 1000000 to 1,234,567
      return n.replace(/\D/g, "").replaceAll(/\B(?=(\d{3})+(?!\d))/g, ",")
    }
  </script>
  <script type="text/javascript">
    $.ajaxSetup({
      data: { 'user_id': 1 }
      });
  </script>
  <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
  <title>React App</title>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
</body>

</html>